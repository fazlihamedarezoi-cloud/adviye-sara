<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>فروشگاه آنلاین ادویه‌سرا</title>

<style>
body{
  margin:0;
  font-family: Arial;
  background:#f2f2f2;
}
header{
  background:#2e7d32;
  color:white;
  padding:20px;
  text-align:center;
  font-size:24px;
  font-weight:bold;
}
.products{
  display:flex;
  flex-wrap:wrap;
  gap:15px;
  justify-content:center;
  padding:15px;
}
.product{
  background:white;
  width:220px;
  border-radius:10px;
  box-shadow:0 4px 8px rgba(0,0,0,0.15);
  padding:10px;
  text-align:center;
}
.product img{
  width:100%;
  height:150px;
  object-fit:cover;
  border-radius:8px;
}
.product h3{
  margin:8px 0 4px;
  font-size:17px;
}
.product p{
  margin:3px 0;
  font-size:14px;
}
.product input{
  width:60px;
  padding:5px;
  margin-top:5px;
}
button{
  display:block;
  margin:20px auto;
  padding:12px 25px;
  background:#25D366;
  color:white;
  border:none;
  border-radius:8px;
  font-size:18px;
}
</style>
</head>

<body>

<header>فروشگاه آنلاین ادویه‌سرا</header>

<div class="products" id="products"></div>

<button onclick="sendOrder()">ارسال سفارش در واتساپ</button>

<script>
const whatsappNumber = "93779369926";
let products = [];

fetch("products.json")
.then(res => res.json())
.then(data => {
  products = data;
  showProducts();
});

function showProducts(){
  const box = document.getElementById("products");
  box.innerHTML = "";
  products.forEach((p,i)=>{
    box.innerHTML += `
      <div class="product">
        <img src="${p.image}">
        <h3>${p.name}</h3>
        <p>نام کیمیاوی: ${p.chemical}</p>
        <p>قیمت: ${p.price} افغانی</p>
        <input type="number" id="q${i}" min="0" value="0">
      </div>
    `;
  });
}

function sendOrder(){
  let text = "سلام، سفارش من:\n";
  let ok = false;

  products.forEach((p,i)=>{
    let q = document.getElementById("q"+i).value;
    if(q > 0){
      text += q + " عدد " + p.name + "\n";
      ok = true;
    }
  });

  if(!ok){
    alert("هیچ محصولی انتخاب نشده");
    return;
  }

  window.open(
    "https://wa.me/" + whatsappNumber + "?text=" + encodeURIComponent(text),
    "_blank"
  );
}
</script>

</body>
</html>
